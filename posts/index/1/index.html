<!DOCTYPE html>
<html lang="en">
  <head>
    <link href='http://fonts.googleapis.com/css?family=Merriweather:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <meta charset="utf-8">
    <title>
                metaodi
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Stefan Oderbolz (&quot;Odi&quot;)">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- load static files from bower -->
    <link href="/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css" media="all">
    <script src="/bower_components/jquery/jquery.js"></script>
    <script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

    <!-- Le styles -->
<link href='/assets/stylesheets/style-a039e10a7d2de8b24d250376ec3148ed.css' type='text/css' rel='stylesheet' media='all'>
<link href='/assets/stylesheets/google_prettify/sons-of-obsidian-afb0925bfa2d994f17dab93e13fbf999.css' type='text/css' rel='stylesheet' media='all'>    
    <!-- Le scripts -->

    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/posts/rss.xml" />

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">

  -->
  </head>

  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">metaodi</a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
            
              <li><a href="/tags">Tags</a></li>
            
            
              <li><a href="/archive">Archive</a></li>
            
            
              <li><a href="/about">About me</a></li>
            
        </ul>
      </div><!-- /.navbar-collapse -->
    </div>
    </nav>

    <div class="container">

      <div class="content">
        <div class="row-fluid">
  <div class="span12">
      <div class="posts">
        <h2 class="title"><span class="date">08.07.2014</span><a href="/posts/2014/07/q-a-wall">Q&amp;A Wall at the OKFestival in Berlin</a> </h3>

        <ul class="tag_box">
        <li class="icon"><i class="glyphicon glyphicon-tags"></i></li>
          <li>
            <a href="/tags#OKFestival-ref">OKFestival <span>1</span></a>
          </li>
          <li>
            <a href="/tags#Conferences-ref">Conferences <span>1</span></a>
          </li>
        </ul>

        <p>Some time ago the OKFestival asked for session proposals for this years conference in Berlin.
I was at the conference last year in Geneva and enjoyed very much.
It&#39;s just a nice atmosphere to talk to people from divers backgrounds (I&#39;ll get back to that in a minute).</p>

<p>Me and my colleagues from Liip thought about sessions for this years topic &quot;Open Minds to Open Action&quot;.
The <a href="http://2014.okfestival.org/programme/programme-faqs/">Programme FAQs</a> gave us some hints, what it takes for a session to be selected:</p>

<blockquote>
<ul>
<li>Does the proposal advance the overall <a href="http://2014.okfestival.org/programme/narrative-and-streams/">mission of the event</a></li>
<li>Does the proposal offer participants a concrete, valuable outcome?</li>
<li>Does the proposal advance the conversation around its area of open?</li>
<li>Is the proposal interactive? – <em>hint: slides and lectures strongly discouraged</em></li>
<li>Does the proposal value or build on OKFestival’s principles of inclusivity and diversity?</li>
</ul>
</blockquote>

<h3 id="toc_0">Help newbies at the conference</h3>

<p>We talked about, how we can help people to connect to each other.
We pictured a person that is interesting in the &quot;Open Knowledge&quot; topic but doesn&#39;t known any people at the conference.
The first steps are always the hardest.
How do you find people that are interested in the same topics?
Of course, one can attend sessions and try to talk to the people there.</p>

<p>But sometimes a little extra help is required.
Some conference solve this problem by providing some kind of buddy system (e.g. the <a href="http://events.ccc.de/2013/11/25/chaospatinnen/">Chaos Mentors at the 30C3</a>).
The buddies are volunteers that show newbies around, and show them the venue, introduce them to people and so on.
This is great for large conferences but <em>might</em> be an overkill for smaller ones.</p>

<p>As we were brainstorming about this we came up with the concept of a place, where everybody is encourages to write down his/her questions, so that others can pick that up and answer them right away or provide guidance.
We first thought about doing this online using something like a twitter hashtag.
But in the end, this is now why you went to a conference.
You want to meet real people to talk face-to-face.</p>

<h3 id="toc_1">Q&amp;A Wall to the rescue</h3>

<p>So the challange is just, to find these people.
To help making this asychronous, we developed the idea of a <strong>physical Q&amp;A wall</strong>.
This wall will be at the venue and provides space to write down questions (think of sticky notes or whiteboards to directly write on).
Like that, this wall provides a meeting point or to simply read and write questions.</p>

<p>I&#39;m very interested in how this wall is being used.
Maybe Q&amp;A is not the only thing that could be done with it.
Everybody is invited to use that space.
There are similar approaches to use such walls or boards to share news in local communities (<a href="http://candychang.com/community-chalkboards/">&quot;Community Chalkboards&quot;</a>).</p>

<p>Btw: the Q&amp;A Wall is also listed as a <a href="http://sched.co/1tx3TIy">session at the OKFestival</a>!</p>


      </div>
      <div class="posts">
        <h2 class="title"><span class="date">11.02.2014</span><a href="/posts/2014/02/usage-of-mongodb-with-a-spatial--and-geojson">Usage of MongoDB with a spatial index and GeoJSON</a> </h3>

        <ul class="tag_box">
        <li class="icon"><i class="glyphicon glyphicon-tags"></i></li>
          <li>
            <a href="/tags#MongoDB-ref">MongoDB <span>1</span></a>
          </li>
          <li>
            <a href="/tags#Open Data-ref">Open Data <span>2</span></a>
          </li>
          <li>
            <a href="/tags#OpenStreetMap-ref">OpenStreetMap <span>2</span></a>
          </li>
          <li>
            <a href="/tags#GIS-ref">GIS <span>1</span></a>
          </li>
        </ul>

        <p>During the <a href="http://opendata.ch/projects/open-data-zuerich-hacknights/">Zurich Hacknights 2013</a> I was part of the team, that wanted to build a <a href="http://make.opendata.ch/wiki/project:denkmalfuehrer">guide for monuments in Zurich</a>.
We were a large group of people with lots of ideas.
Unfortunately I was the only web developer at that time, so I did my best to create a <a href="https://github.com/denkmap/denkmap">prototype of the guide called <em>Denkmap</em></a>.</p>

<p>There is a <a href="http://www.geolion.zh.ch/geodatenservice/show?nbid=691">webservice (WFS) of the GIS-ZH containing all monuments of the Canton</a>.
I converted the source to <a href="http://geojson.org/">GeoJSON</a> using <a href="http://www.gdal.org/ogr2ogr.html">ogr2ogr</a>:</p>

<pre><code class="bash">wget -O DenkmalschutzWFS.gml http://maps.zh.ch/wfs/DenkmalschutzWFS?service=wfs&amp;version=1.1.0&amp;request=GetFeature&amp;typeName=denkmalschutzobjekte
ogr2ogr -f geoJSON -s_srs EPSG:21781 -t_srs EPSG:4326 denkmal.geojson DenkmalschutzWFS.gml
</code></pre>

<p>I added the result as a layer to the map.
This worked, but unfortunately the GeoJSON file is about <strong>7MB</strong>.
And each client has to download it.
This takes time, especially on mobile devices not connected to a WLAN.</p>

<p><strong>For a prototype this was okay, but how can we solve this for the future?</strong></p>

<p>At this point it was clear that I need some part running on a server.
This part must be able to divide all my data in reasonable chunks, that the client is able to download in a short time.
Because I&#39;m  already dealing with GeoJSON and I didn&#39;t yet use <a href="http://www.mongodb.org/">MongoDB</a>, I wanted to give it a try.
I read that there is a <a href="http://docs.mongodb.org/manual/applications/geospatial-indexes/">spatial index</a> and the possibility to run <a href="http://docs.mongodb.org/manual/reference/operator/query-geospatial/">spatial queries</a>.
Hence, I had my perfect candidate.
The other obvious solution would have been <a href="http://postgis.net/">PostgreSQL with PostGIS</a>.
This would have worked too, but I wanted to try something new. </p>

<h3 id="toc_0">Import GeoJSON in MongoDB</h3>

<p>This is quite easy if you respect the rules set by the <a href="http://docs.mongodb.org/manual/reference/program/mongoimport/"><code>mongoimport</code> command</a>:</p>

<ol>
<li>There used to be a <code>FeatureCollection</code>, which basically is a big array. I removed it to get a list of objects.</li>
<li>Only use the MongoDB-supported subset of GeoJSON (i.e. Point, LineString and Polygon)</li>
<li>The file must contain exactly one object per line, remove extra lines to make the importer happy</li>
</ol>

<p>Once this is done, you can run the following to import your GeoJSON in a database called <code>denkmap</code> and a collection called <code>wfsktzh</code>:</p>

<pre><code class="bash">mongoimport --db denkmap --collection wfsktzh &lt; denkmal.geojson
mongo denkmap --eval &quot;db.wfsktzh.ensureIndex({geometry: &#39;2dsphere&#39;})&quot;
</code></pre>

<h3 id="toc_1">Create RESTful interface to consume the data</h3>

<p>Once the data is save and sound in MongoDB, all you need is a script to expose exactly the data you need.</p>

<p>The <a href="https://www.npmjs.org/package/express">Sinatra-like <code>express</code> framework</a> helps to create the structure:</p>

<pre><code class="javascript">var express = require(&#39;express&#39;),
    geodata = require(&#39;./geodata.js&#39;),
    app = express(),
    port = 3000;

app.get(&#39;/nearby/:lat/:lon&#39;, function(req, res) {
    console.log(req.method + &#39; request: &#39; + req.url);
    var lat = parseFloat(req.params.lat),
        lon = parseFloat(req.params.lon);
    geodata.nearby(lat, lon, function(docs) {
        res.send(docs);
    });
});

app.listen(port);
console.log(&#39;Listening on port &#39; + port + &#39;...&#39;);
</code></pre>

<p>This allows us to query MongoDB using URLs like this: <a href="http://localhost:3000/nearby/47.3456/8.5432">http://localhost:3000/nearby/47.3456/8.5432</a></p>

<p>The <code>geodata.js</code> contains the spatial query using <code>$near</code>. It returns all results in 1000m distance from the given coordinates (lat/lon). <a href="https://www.npmjs.org/package/mongojs"><code>mongojs</code> is a Node.js library for MongoDB</a>:</p>

<pre><code class="javascript">var dbUrl = &quot;denkmap&quot;,
    coll = [&quot;wfsktzh&quot;],
    db = require(&quot;mongojs&quot;).connect(dbUrl, coll);

exports.nearby = function(lat, lon, callbackFn) {
    db.wfsktzh.find({
        geometry: {
            $near: { 
                $geometry : {
                    type: &quot;Point&quot;,
                    coordinates: [lon, lat]
                },
                $maxDistance: 1000
            }
        }
    },
    function(err, res) {
        callbackFn(res);
    });
}
</code></pre>

<p>By the way: the project is still active and we are still looking for people to participate.
The next step would be to connect DenkMap to <a href="http://wikidata.org">WikiData</a> and display some extra information, link to the corresponding Wikipedia page, and/or display images of the monument in the app.</p>


      </div>
      <div class="posts">
        <h2 class="title"><span class="date">31.01.2014</span><a href="/posts/2014/01/stop-making-stupid-open-data-contests">Stop making stupid Open Data contests!</a> </h3>

        <ul class="tag_box">
        <li class="icon"><i class="glyphicon glyphicon-tags"></i></li>
          <li>
            <a href="/tags#Open Data-ref">Open Data <span>2</span></a>
          </li>
          <li>
            <a href="/tags#OGD-ref">OGD <span>1</span></a>
          </li>
        </ul>

        <p><em>Disclaimer:
I work for <a href="http://www.liip.ch">Liip</a>, the company that build the <a href="http://opendata.admin.ch">Open Data pilot portal for Switzerland</a>.
I&#39;m one of the developers of the portal.
On the other hand, I&#39;m a member of the <a href="http://opendata.ch">opendata.ch</a> association.</em></p>

<p>Although I&#39;m a relatively new member of the Open Data community, I use and work with Open Data in different forms for many years now.
I&#39;m a keen enthusiast of the underlying idea of openness, collaboration and knowledge sharing.
But the whole idea of Open Government Data (OGD) in Switzerland is currently broken.
There are numerous problems and it probably all boils down to false expectations.</p>

<p>To make new data known to the public, often the first idea is to make an app contest.
At first this sounds like a good idea: People working with your data and creating an app.
It sounds like a win-win situation.
Some may even think it&#39;s cheap way to get a lot of apps.
The problem is, that contests have winners. And when there are winners, there must be losers.
<strong>Your data is much too valuable, and every contribution is too important to waste time to choose a <em>winner</em>.</strong></p>

<ul>
<li>You limit the interest in the data (<em>why should I continue my project if I just lost a contest?</em>).</li>
<li>You limit the collaboration between the different groups that take part in the contest (<em>why should I help somebody else to create a better app, if that decreases my chances to win this contest myself?</em>).</li>
</ul>

<p>The goal of an OGD data owner should be, that a lot of people know and use your data.
This makes it worth to create this data in the first place.
It doesn&#39;t matter if it is used by a special interest group or by an app used by millions of people.</p>

<p>On the other side, hackathons provide a good environment to play around, talk with different people and hack along.
This is the kind of thing we need.
Please understand that after such an event there are tons of ideas around. Prototypes, unfinished apps, visualizations etc. This is all very valuable. Don&#39;t expect a bunch of polished, ready-to-use apps as a result.</p>

<p>Most data owners consider it a failure if nothing happens after they release data.
This is just plain wrong. The whole point of Open Data is to open your data. It&#39;s done. It&#39;s out there.
Anyone that is interested can use this data. You never know when this is. Eventually someone creates a mashup, where you dataset is the missing piece.</p>

<p>What if this does not happen? It doesn&#39;t matter. Maybe the time was not right. Maybe this dataset is just not interesting enough.
But that doesn&#39;t mean it was not worth to open it.</p>

<p>But of course there some things that you <em>can</em> and <em>should</em> do. Here is my little list of <strong>DOs</strong> and <strong>DON&#39;Ts</strong>:</p>

<h4 id="toc_0"><strong>DO</strong></h4>

<ul>
<li>Talk about your data (speeches, blog posts)</li>
<li>Make events to explain your data</li>
<li>Bring cool swag to hackathons (for everyone!) :)</li>
<li>Invite people to visit you, connect your experts with the community</li>
<li>Provide help to process your data</li>
<li>Open Source the tools you use internally to make them available for everybody</li>
<li>Make sure to involve the media (yes, if you release your data or make an event, invite them)</li>
<li>Coordinate with the community, ask questions, don&#39;t make assumptions</li>
</ul>

<h4 id="toc_1"><strong>DON&#39;T</strong></h4>

<ul>
<li>Measure the success of your Open Data by the <em>amount</em> of apps/visualization build with it. Actually, don&#39;t measure the success at all. Concentrate on releasing new and interesting data.</li>
<li>Expect people to do your work</li>
<li>Assume everybody was just waiting for your data and must be grateful for it. Give people time to discover your data</li>
<li>Think that a press release is all it takes to get attention from the media</li>
<li>If you have a budget for Open Data, don&#39;t spend it for someone to create an app with your data. Use it to organize events, invite people, do whatever you are best at!</li>
<li><strong>Seriously: No more contests, no more fucking prizes.</strong> </li>
</ul>


      </div>
      <div class="posts">
        <h2 class="title"><span class="date">30.01.2014</span><a href="/posts/2014/01/all-new-in-2014">All new in 2014</a> </h3>

        <ul class="tag_box">
        <li class="icon"><i class="glyphicon glyphicon-tags"></i></li>
          <li>
            <a href="/tags#ruhoh-ref">ruhoh <span>1</span></a>
          </li>
        </ul>

        <p>Some time ago I started to fiddle with <a href="http://ruhoh.com">ruhoh</a>, a static blog generator.
I thought the idea of having static files as <em>the interface</em> to your website was intriguing.</p>

<p>When I started ruhoh was still beta (I don&#39;t remember the exact version number, but you can <a href="https://github.com/metaodi/odi86.ruhoh.com">see for yourself</a> if you want).
The nice thing about ruhoh is, that it&#39;s still in development, and not all things just work. But the creator of ruhoh is available on <a href="https://twitter.com/ruhohBlog">Twitter</a> or <a href="https://github.com/ruhoh/ruhoh.rb">GitHub</a>, so you can just ask, if something does not work.</p>

<p>Anyway, my early attempts to move from Tumblr to ruhoh never really made it past this fiddle phase.
But when Tumblr announced a big DNS change and I found out that the DNS service I was using (<a href="http://xname.org">XName</a>) is really bad when I comes to changes, I <em>lost</em> my blog.</p>

<p>I used to blog under the domain <code>readmore.ch</code>. But this doesn&#39;t feel right anymore. I use my nickname &#39;odi&#39; resp. &#39;metaodi&#39; all over the interwebs. So why not use it for my blog?
Therefore I was once more looking into ruhoh, which in the meantime grew to a pretty good stable product (with still some fiddling if you want). So finally I created a new blog using ruhoh 2.6, imported my old Tumblr content here as markdown files and start all over again.</p>

<p>The fun part was to upgrade the <a href="https://github.com/ruhoh/theme-bootstrap-2">ruhoh standard template</a> to <a href="http://getbootstrap.com/">Bootstrap 3</a>.
Now I got an up to date blog, which is even responsive.
<a href="https://github.com/metaodi/metaodi.github.io">The complete source can be found on GitHub</a>.
Btw: I use <a href="http://pages.github.com/">GitHub Pages</a> for the hosting and switched to <a href="https://dnsimple.com">DNSimple</a> to provide my DNS service for <code>metaodi.ch</code>.</p>

<p>My plan for this blog is, that it should contain my opinion on various topics. It should not be too technical (I will write such content on other blogs, like the one of my company). It&#39;ll be mainly in English, but every once in a while I will write in German if needed (look out for the corresponding tag).</p>

<p>Happy reading and welcome to my new home!</p>


      </div>
      <div class="posts">
        <h2 class="title"><span class="date">23.05.2013</span><a href="/posts/2013/05/on-citizenship-in-open-source-software-development">On Citizenship in Open-source software development — Products I Wish Existed</a> </h3>

        <ul class="tag_box">
        <li class="icon"><i class="glyphicon glyphicon-tags"></i></li>
          <li>
            <a href="/tags#Link-ref">Link <span>4</span></a>
          </li>
        </ul>

        <p><a href="https://medium.com/products-i-wish-existed/ddd1f7be1415">https://medium.com/products-i-wish-existed/ddd1f7be1415</a></p>

<blockquote>
<p>TL;DR: By giving an actual social status to the people contributing to
a repository, GitHub would solve the problem of zombie-projects with …</p>
</blockquote>


      </div>
      <div class="posts">
        <h2 class="title"><span class="date">22.10.2012</span><a href="/posts/2012/10/remember-without-unit-tests-youre-not">Remember: Without unit tests, you're not refactoring. You're just changing shit</a> </h3>

        <ul class="tag_box">
        <li class="icon"><i class="glyphicon glyphicon-tags"></i></li>
          <li>
            <a href="/tags#Sencha Touch-ref">Sencha Touch <span>2</span></a>
          </li>
          <li>
            <a href="/tags#Siesta-ref">Siesta <span>1</span></a>
          </li>
          <li>
            <a href="/tags#Unit Testing-ref">Unit Testing <span>4</span></a>
          </li>
        </ul>

        <iframe width="560" height="315" src="//www.youtube.com/embed/JWm68Ghc1vA" frameborder="0" allowfullscreen></iframe>


      </div>
      <div class="posts">
        <h2 class="title"><span class="date">11.10.2012</span><a href="/posts/2012/10/insert-coin-to-play-can-gaming-concepts-help">Insert Coin To Play</a> </h3>

        <ul class="tag_box">
        <li class="icon"><i class="glyphicon glyphicon-tags"></i></li>
          <li>
            <a href="/tags#OpenStreetMap-ref">OpenStreetMap <span>2</span></a>
          </li>
          <li>
            <a href="/tags#Gamification-ref">Gamification <span>1</span></a>
          </li>
        </ul>

        <p>Can gaming concepts help make OpenStreetMap better?</p>

<p><iframe src="http://blip.tv/play/hdlkgtK6EAI.html?p=1" width="550" height="443" frameborder="0" allowfullscreen></iframe><embed type="application/x-shockwave-flash" src="http://a.blip.tv/api.swf#hdlkgtK6EAI" style="display:none"></embed></p>


      </div>
      <div class="posts">
        <h2 class="title"><span class="date">29.05.2012</span><a href="/posts/2012/05/fiddle-around-code">Fiddle around (code)</a> </h3>

        <ul class="tag_box">
        <li class="icon"><i class="glyphicon glyphicon-tags"></i></li>
          <li>
            <a href="/tags#Programming-ref">Programming <span>16</span></a>
          </li>
          <li>
            <a href="/tags#JavaScript-ref">JavaScript <span>4</span></a>
          </li>
          <li>
            <a href="/tags#SQL-ref">SQL <span>6</span></a>
          </li>
          <li>
            <a href="/tags#Sencha Touch-ref">Sencha Touch <span>2</span></a>
          </li>
        </ul>

        <p>Since I’m using JavaScript more heavily, and beeing active on
<a href="http://stackoverflow.com/users/549755/odi">StackOverflow</a>, I’m using a
service called <a href="http://jsfiddle.net/">jsFiddle</a>. It’s a great tool with
a simple idea (I can see a pattern here: great tools are always based on
simple ideas): Make it easy to write demo code. Either to help someone
or to point out a problem.</p>

<p><img src="http://media.tumblr.com/tumblr_m4si0oEqzG1qa2z4q.png" alt="jsFiddle UI"></p>

<p>jsFiddle comes with a very basic user interface that is divided in 4
parts:</p>

<ul>
<li>  Basic HTML (omitting <code>&lt;head&gt;</code> and everything you don’t need)</li>
<li>  CSS for styling</li>
<li>  JavaScript (the heart of the page)</li>
<li>  and finally the resulting page</li>
</ul>

<p>No login required, just write your code and share the unique link. You
can even include JavaScript frameworks or other external resources, it’s
really easy!</p>

<p>Then last week I stumpled upon a website called
<a href="http://sqlfiddle.com/">sqlFiddle</a>, which uses the basic idea of
jsFiddle, but this time for databases and queries. There you can select
different database systems and start writing your SQL code.</p>

<p>Now today I learned about a site called <a href="http://www.senchafiddle.com/">Sencha
Fiddle</a>, that let’s you actually develop
<a href="http://www.sencha.com/products/touch">Sencha Touch</a> mobile application.
You can even download the whole thing when your done. Wow!</p>

<p>There are several more xFiddle services that I can think of being
valuable:</p>

<ul>
<li>  LaTeX</li>
<li>  Shell scripting (allowing me to choose which shell I want: csh, ksh,
bash, ..)</li>
<li>  Python</li>
<li>  Sass/SCSS</li>
<li>  Less</li>
<li>  ..</li>
</ul>

<p>I don’t know if there is a directory of these services (leave me a
message if you know it), but anyway I hope to see more websites like
that in the future.</p>

<p>Spread the word. Start to code.</p>

<p><strong>UPDATE I:</strong> There is a <a href="http://pythonfiddle.com/">Python Fiddle</a> :-)</p>

<p><strong>UPDATE II:</strong> …and <a href="http://rubyfiddle.com/">Ruby Fiddle</a> (thanks Jürg)</p>

<p><strong>UPDATE III:</strong> <a href="http://refiddle.com/">reFiddle</a> for regular expressions
(thanks <a href="https://twitter.com/tonisuter/status/215759431483396096">Toni
Suter</a>)</p>


      </div>
      <div class="posts">
        <h2 class="title"><span class="date">08.03.2012</span><a href="/posts/2012/03/setup-javascript-unit-testing-using-qunit-phantomjs">Setup JavaScript unit testing using QUnit, PhantomJS and Jenkins on Amazon EC2</a> </h3>

        <ul class="tag_box">
        <li class="icon"><i class="glyphicon glyphicon-tags"></i></li>
          <li>
            <a href="/tags#JavaScript-ref">JavaScript <span>4</span></a>
          </li>
          <li>
            <a href="/tags#Unit Testing-ref">Unit Testing <span>4</span></a>
          </li>
          <li>
            <a href="/tags#Programming-ref">Programming <span>16</span></a>
          </li>
          <li>
            <a href="/tags#QUnit-ref">QUnit <span>1</span></a>
          </li>
          <li>
            <a href="/tags#Jenkins-ref">Jenkins <span>1</span></a>
          </li>
          <li>
            <a href="/tags#PhantomJS-ref">PhantomJS <span>1</span></a>
          </li>
          <li>
            <a href="/tags#Amazon EC2-ref">Amazon EC2 <span>1</span></a>
          </li>
        </ul>

        <p>Me and my friend are currently working on a term paper about <a href="https://developers.google.com/fusiontables/">Google
Fusion Tables</a>. It’s about
it’s possibilities and potential. Our goal is to create a cross-platform
mobile application using <a href="http://www.sencha.com/products/touch">Sencha
Touch</a>, therefore we need to write
a lot of JavaScript code for the UI and to access the Google Fusion
Tables. Fortunately Google provides an <a href="https://groups.google.com/forum/#!topic/fusion-tables-users-group/TGDzExKymoI/discussion">inofficial JSONP
API</a>,
so we get native JavaScript access without another server roundtrip
(there is <a href="http://www.reddmetrics.com/2011/08/10/fusion-tables-javascript-query-maps.html">a good blog
post</a>
explaining the usage with jQuery).</p>

<p>The next question is: if we write tons of code in JavaScript, how are we
going to unit test this code. We already used
<a href="http://docs.jquery.com/QUnit">QUnit</a> in a former project and it’s
fairly easy to use, so we decided to use that. This all works very well,
you get a <a href="http://gft.rdmr.ch/test/js">nice web page where all your tests
run</a> in the browser and you get nice output,
everything’s fine.</p>

<p><img src="http://media.tumblr.com/tumblr_m0ivihw8Rb1qa2z4q.png" alt="Browser output of
QUnit" title="Browser output of QUnit"></p>

<p>But, wait! What about our build? We use <a href="http://jenkins-ci.org/">Jenkins
CI</a>, which is configured to <a href="https://wiki.jenkins-ci.org/display/JENKINS/Github+Plugin">build our project
every time we push new code to
GitHub</a>.
Wouldn’t it be nice if our tests run when we build, so we get immediate
feedback and never ever forget to run them and fix our code?</p>

<p>Yes, it definitely would be!</p>

<p>Now we have several problems</p>

<ul>
<li>  How do I run JavaScript without a browser?</li>
<li>  Does Jenkins “speak” JavaScript?</li>
<li>  Is there a solution for ant? Do I need another tool? Another server?</li>
<li>  How do I get my test results as XML, so Jenkins can handle them?</li>
</ul>

<p>I checked serveral solutions to my this problems: From
<a href="http://nodejs.org/">node.js</a> to <a href="http://www.mozilla.org/rhino/">Rhino</a>
(there is even an <a href="http://code.google.com/p/rhinounit/">ant based unit testing
framework</a> using Rhino) to
<a href="http://swarm.jquery.org/">TestSwarm</a>. They were all too limited or too
bloated. I couldn’t believe this is such a big deal to run QUnit
JavaScript code, get the results and publish them in Jenkins.</p>

<p>This is when I found out about <a href="http://www.phantomjs.org/">PhantomJS</a>, a
nice and handy headless WebKit browser, that runs JavaScript code.
Exactly what I need. As we are using <a href="http://aws.amazon.com/ec2/">Amazon
EC2</a> for this project, I tried to install
PhantomJS on a basic Amazon AMI. I just couldn’t get it to work, when I
asked in Twitter if someone succeeded to setup PhantomJS. <a href="https://twitter.com/#!/philippkueng/status/176606716492914688">Philipp Küng
pointed
out</a>
(thanks again!) that it is much easier to setup with Ubuntu. Well then,
launch a new Instance on EC2, choose the <a href="http://cloud.ubuntu.com/ami/">latest Ubuntu
AMI</a>, and after some simple commands
you’re good to go:</p>

<pre><code>sudo add-apt-repository ppa:jerome-etienne/neoip
sudo apt-get update
sudo apt-get install phantomjs
</code></pre>

<p>After that I had to <a href="http://code.google.com/p/phantomjs/wiki/XvfbSetup">setup Xvfb (virutal
framebuffer)</a>,
because EC2 instances are headless. Generally see the <a href="http://code.google.com/p/phantomjs/wiki/PhantomJS">PhantomJS
Wiki</a> for further
information.</p>

<p>Now I have a PhantomJS instance, the published QUnit tests and Jenkins.
To be able to retrieve the data from PhantomJS I created a simple PHP
script, which runs on the new instance and just executes a shell command
(idea from <a href="http://cisight.com/run-latest-phantomjs-with-shell_exec-php-on-ubuntu-11-10-oneiric/">this blog
post</a>).</p>

<pre><code>&lt;?php
/* Display 99 is configured on the server using Xvfb */
$value = shell_exec(&quot;DISPLAY=:99 phantomjs run_qunit.js http://gft.rdmr.ch/test/js/index.html junit-xml&quot;);
echo $value;
?&gt;
</code></pre>

<p>With this URL I was able to create a simple ant target, which fetches
the latest results from the tests:</p>

<pre><code>&lt;target name=&quot;test-js&quot; depends=&quot;deploy&quot;&gt;
    &lt;get src=&quot;${test.url}&quot; dest=&quot;${result.dir}/${result.js.file}&quot;/&gt;
&lt;/target&gt;
</code></pre>

<p>Where <code>${test.url}</code> referes to my PHP script, and <code>${result.dir}</code> is
configured as the location of JUnit reports in Jenkins (see screenshot):</p>

<p><img src="http://media.tumblr.com/tumblr_m0jhgm87wz1qa2z4q.png" alt="Jenkins job configuration for JUnit XML
reports" title="Jenkins job configuration for JUnit XML reports"></p>

<p>Now the last missing piece is to get proper output for Jenkins. I
adapted the <a href="https://github.com/ariya/phantomjs/blob/1.2/examples/run-qunit.js">QUnit test
runner</a>
from the PhantomJS examples accordingly (called <code>run_qunit.js</code>, see
above, here is <a href="https://github.com/odi86/GFTPrototype/blob/master/test/js/run_qunit.js">my
version</a>).
I added a new command line parameter <code>type</code>, which determines the type
of output the runner generates. With the value <code>junit-xml</code>, the output
can directly be used by Jenkins, this is the reason for the junit-xml
parameter in the PHP script above.</p>

<p>The generated XML looks like that:</p>

<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;
---
 Tests completed in 2294 milliseconds.
36 tests of 36 passed, 0 failed. 
---
&lt;testsuite name=&quot;QUnit - JavaScript Tests&quot; timestamp=&quot;2012-03-08T00:11:27Z&quot; tests=&quot;36&quot; failures=&quot;0&quot; time=&quot;2.294&quot;&gt;
&lt;testcase name=&quot;PaintSwitzerland&quot; classname=&quot;GoogleFusionTable&quot;&gt;
&lt;/testcase&gt;
&lt;testcase name=&quot;Construtor&quot; classname=&quot;GftLib&quot;&gt;
&lt;/testcase&gt;
&lt;testcase name=&quot;Constants&quot; classname=&quot;GftLib&quot;&gt;
&lt;/testcase&gt;
&lt;testcase name=&quot;doGet&quot; classname=&quot;GftLib&quot;&gt;
&lt;/testcase&gt;
&lt;testcase name=&quot;doPost&quot; classname=&quot;GftLib&quot;&gt;
&lt;/testcase&gt;
&lt;testcase name=&quot;doGetJSONP&quot; classname=&quot;GftLib&quot;&gt;
&lt;/testcase&gt;
&lt;testcase name=&quot;doPostJSONP&quot; classname=&quot;GftLib&quot;&gt;
&lt;/testcase&gt;
&lt;testcase name=&quot;ExecSelect&quot; classname=&quot;GftLib&quot;&gt;
&lt;/testcase&gt;
&lt;/testsuite&gt;
</code></pre>

<p>And in Jenkins like that: <img src="http://media.tumblr.com/tumblr_m0ji3zihxl1qa2z4q.png" alt="Test trend with failed/successful tests over
time" title="Test trend with failed/successful tests over time"></p>

<p>Overview of tests: <img src="http://media.tumblr.com/tumblr_m0ji5dTeGL1qa2z4q.png" alt="Overview of all performed
tests" title="Overview of all performed tests"></p>

<p>Failed test: <img src="http://media.tumblr.com/tumblr_m0jie0S4WY1qa2z4q.png" alt="Detail of a failed test incl.
&#39;stacktrace&#39;" title="Detail of a failed test incl. &#39;stacktrace&#39;"></p>


      </div>
      <div class="posts">
        <h2 class="title"><span class="date">06.10.2011</span><a href="/posts/2011/10/zff-2011-turn-me-on-goddammit">ZFF 2011: Turn Me On, Goddammit</a> </h3>

        <ul class="tag_box">
        <li class="icon"><i class="glyphicon glyphicon-tags"></i></li>
          <li>
            <a href="/tags#Cinema-ref">Cinema <span>26</span></a>
          </li>
          <li>
            <a href="/tags#Zurich Film Festival-ref">Zurich Film Festival <span>25</span></a>
          </li>
        </ul>

        <p><a href="http://www.zurichfilmfestival.org/de//filme/1896/turn-me-on-goddammit/"><img src="http://media.tumblr.com/tumblr_lsdq0air4I1qa2z4q.jpg" alt="Turn Me On,
Goddammit" title="Turn Me On, Goddammit"></a></p>

<p>In <strong>&quot;Turn Me On, Goddammit&quot;</strong> von Jannicke Systad Jacobsen spielt die
bemerkenswerte Helene Bergsholm die 15jährige Alma, welche gerade dabei
ist ihre Sexualität zu entdecken. Sie wohnt mit ihrer Mutter in einem
Provinznest in Norwegen. An einer Party ereignet sich ein peinlich
Vorfall mit ihrem Schwarm Artur, welchen sie brühwarm ihren Freundinnen
erzählt (“He poked me with his penis!”). Niemand will ihr diese
Geschichte glauben, fortan wird sie zur Aussenseiterin, die
Lügengeschichten verbreitet.</p>

<p>Auch der Zuschauer des Film wird geschickt darüber im Unklaren gelassen,
ob dieses Ereignis tatsächlich stattgefunden hat oder nicht. Die Kamera
schweift manchmal ins träumerische ab, indem der Fokus auf dem
Vordergrund liegt und der Hintergrund stark verschwommen wird oder die
Farbgebung ganz stark ist. Dieses Stilmittel setzt die Regisseur immer
dann ein, wenn die Hauptdarstellerin in ihrer Fantasie ist, jedoch
manchmal auch bei Ereignissen die tatsächlich stattfinden. Dadurch
erscheint auch die ganze Welt des Dorfes mal romantisch, mal langweilig.</p>

<p>Die Hauptdarstellerin ist eine Wucht, diese junge Frau weiss genau was
sie will und bewegt sich sehr natürlich vor der Kamera, das Thema
Sexualität ist einfach eine Facette ihres (pubertären) Charakters, der
weder übertrieben wirkt noch ins Lächerliche gezogen wird.</p>

<p><em>Leichte Erzählweise, kurzweilige, gute Unterhaltung.</em></p>


      </div>
   <div class="text-center">    
   <ul class="pagination">
       <li class="active"><a href="/posts/index/1">1</a></li>
       <li><a href="/posts/index/2">2</a></li>
       <li><a href="/posts/index/3">3</a></li>
       <li><a href="/posts/index/4">4</a></li>
       <li><a href="/posts/index/5">5</a></li>
       <li><a href="/posts/index/6">6</a></li>
       <li><a href="/posts/index/7">7</a></li>
       <li><a href="/posts/index/8">8</a></li>
       <li><a href="/posts/index/9">9</a></li>
   </ul>
   </div>
  </div>
</div>

      </div>

      <hr>
      <div class="footer">
        <p>&copy; Stefan Oderbolz (&quot;Odi&quot;) 2014
          with <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a>
          and <a href="http://getbootstrap.com/" target="_blank">Bootstrap</a>
        </p>
      </div>

    </div> <!-- /container -->

    <!-- Google Prettify -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.js"></script>
<script>
  var pres = document.getElementsByTagName("pre");
  for (var i=0; i < pres.length; ++i) {
    pres[i].className = "prettyprint linenums";
  }
  prettyPrint();
</script>
<!-- end Google Prettify -->
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-47578431-1']);
  _gaq.push(['_trackPageview']);
  

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


    
  </body>
</html>
